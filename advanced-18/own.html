<!DOCTYPE html>
<html>

<head>
  <style type="text/css">
    .content {
      position: relative;
    }

    .item {
      position: absolute;
      width: 200px;
      margin-right: 10px;
      margin-top: 10px;
      transition: all 1s;
    }

    .h1 {
      height: 200px;
      background-color: #f4b300;
    }

    .h2 {
      height: 300px;
      background-color: #691BB8;
    }

    .h3 {
      height: 400px;
      background-color: #006ac1;
    }
  </style>
  <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>


</head>

<body>
  <div class="content">
    <div class="item h1">
      1
    </div>
    <div class="item h3">
      2
    </div>
    <div class="item h2">
      3
    </div>
    <div class="item h1">
      4
    </div>
    <div class="item h1">
      5
    </div>
    <div class="item h3">
      6
    </div>
    <div class="item h3">
      7
    </div>
    <div class="item h2">
      8
    </div>
    <div class="item h1">
      9
    </div>
    <div class="item h3">
      10
    </div>
    <div class="item h3">
      11
    </div>
    <div class="item h3">
      12
    </div>
    <div class="item h2">
      13
    </div>
    <div class="item h2">
      14
    </div>
  </div>

  <script type="text/javascript">
    var main = (function () {
      function init() {
        waterfall()
        $(window).resize(function () {
          waterfall()
        })
      }


      function waterfall() {
        var colLenth = parseInt($('.content').width() / $('.item').width())

        var itemArr = []
        for (var i = 0; i < colLenth; i++) {
          itemArr[i] = 0
        }

        $('.item').each(function () {
          var minValue = Math.min.apply(null, itemArr)
          var minIndex = itemArr.indexOf(minValue)

          $(this).css({
            top: itemArr[minIndex],
            left: $(this).outerWidth(true) * minIndex
          })

          itemArr[minIndex] += $(this).outerHeight(true)
        })
      }

      return {
        init: init
      }
    })()

    main.init()
  </script>
</body>

</html>