{"version":3,"sources":["webpack:///dist/app.js","webpack:///webpack/bootstrap 9a533c3d840593a8e180","webpack:///./javascripts/constants.js","webpack:///./javascripts/helpers.js","webpack:///./javascripts/lazyload.js","webpack:///./javascripts/app.js","webpack:///./javascripts/tab.js","webpack:///./javascripts/search.js","webpack:///./javascripts/toplist.js","webpack:///./javascripts/recommend.js","webpack:///./javascripts/slider.js","webpack:///./javascripts/music_player.js","webpack:///./javascripts/progress_bar.js","webpack:///./javascripts/lyrics_player.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","RECOMMEND_URL","TOPLIST_URL","SEARCH_URL","LYRICS_URL","songUrl","id","lyricsUrl","songid","_constants","albumCoverUrl","searchUrl","keyword","page","arguments","length","undefined","lazyload","images","imgs","slice","document","querySelectorAll","window","observer","IntersectionObserver","entries","forEach","entry","intersectionRatio","loadImage","target","unobserve","threshold","img","observe","onscroll","throttle","removeEventListener","filter","classList","contains","inViewport","addEventListener","dispatchEvent","Event","func","wait","prev","timer","fn","curr","Date","now","diff","clearTimeout","setTimeout","_img$getBoundingClien","getBoundingClientRect","top","left","right","bottom","vpWidth","documentElement","clientWidth","vpHeight","clientHeight","callback","image","Image","src","dataset","onload","remove","onHashChange","hash","location","test","matches","indexOf","match","options","reduce","res","cur","arr","split","decodeURIComponent","player","play","hide","_search","_toplist","_recommend","_music_player","Search","querySelector","MusicPlayer","TopList","launch","Recommend","show","event","role","parentElement","children","tab","add","content","view","child","style","display","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","_helpers","el","this","$el","$input","onKeyUp","bind","$songs","songs","perpage","nomore","fetching","onScroll","trim","reset","keyCode","search","pageYOffset","body","scrollHeight","innerHTML","_this","loading","fetch","then","json","data","song","curpage","list","message","append","done","catch","html","map","artist","singer","join","songname","albummid","interval","insertAdjacentHTML","_lazyload","topList","render","_this2","item","picUrl","replace","topTitle","songlist","songList","singername","_slider","renderSlider","slider","renderRadios","radioList","renderPlayLists","slides","Slider","slide","link","linkUrl","radios","radio","Ftitle","playlists","songListDesc","duration","index","start","$wrap","firstElementChild","transitionDuration","width","setInterval","next","transform","_progress_bar","_lyrics_player","$audio","createAudio","lyrics","LyricsPlayer","progress","ProgressBar","audio","createElement","Math","floor","random","restart","appendChild","onPlay","onPause","pause","innerText","coverUrl","backgroundImage","className","lyric","text","elapsed","$progress","$elapsed","$duration","formatTime","intervalId","update","clearInterval","seconds","mins","secs","$lines","round","currentTime","getSeconds","y","LINE_HEIGHT","line","$active","formatText","p1","p2","div"],"mappings":"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","file":"dist/app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar RECOMMEND_URL = exports.RECOMMEND_URL = 'https://qq-music-api.now.sh';\nvar TOPLIST_URL = exports.TOPLIST_URL = 'https://qq-music-api.now.sh/top';\nvar SEARCH_URL = exports.SEARCH_URL = 'https://qq-music-api.now.sh/search';\nvar LYRICS_URL = exports.LYRICS_URL = 'https://qq-music-api.now.sh/lyrics';\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.songUrl = songUrl;\nexports.lyricsUrl = lyricsUrl;\nexports.albumCoverUrl = albumCoverUrl;\nexports.searchUrl = searchUrl;\n\nvar _constants = __webpack_require__(0);\n\nfunction songUrl(id) {\n  return 'http://ws.stream.qqmusic.qq.com/' + id + '.m4a?fromtag=46';\n}\n\nfunction lyricsUrl(songid) {\n  return _constants.LYRICS_URL + '?id=' + songid;\n}\n\nfunction albumCoverUrl(id) {\n  return 'https://y.gtimg.cn/music/photo_new/T002R150x150M000' + id + '.jpg';\n}\n\nfunction searchUrl(keyword) {\n  var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  return _constants.SEARCH_URL + '?keyword=' + keyword + '&page=' + page;\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lazyload = lazyload;\nfunction lazyload(images) {\n  var imgs = [].slice.call(images || document.querySelectorAll('.lazyload')); // Array.from(images)\n\n  if ('IntersectionObserver' in window) {\n    var observer = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        if (entry.intersectionRatio > 0) {\n          loadImage(entry.target, function () {\n            observer.unobserve(entry.target);\n          });\n        }\n      });\n    }, { threshold: 0.01 });\n\n    imgs.forEach(function (img) {\n      return observer.observe(img);\n    });\n  } else {\n    var onscroll = throttle(function () {\n      if (imgs.length === 0) {\n        return window.removeEventListener('scroll', onscroll);\n      }\n      imgs = imgs.filter(function (img) {\n        return img.classList.contains('lazyload');\n      });\n      imgs.forEach(function (img) {\n        return inViewport(img) && loadImage(img);\n      });\n    }, 300);\n\n    window.addEventListener('scroll', onscroll);\n    window.dispatchEvent(new Event('scroll'));\n  }\n}\n\nfunction throttle(func, wait) {\n  var prev = void 0,\n      timer = void 0;\n  return function fn() {\n    var curr = Date.now();\n    var diff = curr - prev;\n    if (!prev || diff >= wait) {\n      func();\n      prev = curr;\n    } else if (diff < wait) {\n      clearTimeout(timer);\n      timer = setTimeout(fn, wait - diff);\n    }\n  };\n}\n\nfunction inViewport(img) {\n  var _img$getBoundingClien = img.getBoundingClientRect(),\n      top = _img$getBoundingClien.top,\n      left = _img$getBoundingClien.left,\n      right = _img$getBoundingClien.right,\n      bottom = _img$getBoundingClien.bottom;\n\n  var vpWidth = document.documentElement.clientWidth;\n  var vpHeight = document.documentElement.clientHeight;\n  return (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) && (left > 0 && left < vpWidth || right > 0 && right < vpWidth);\n}\n\nfunction loadImage(img, callback) {\n  var image = new Image();\n  image.src = img.dataset.src;\n  image.onload = function () {\n    img.src = image.src;\n    img.classList.remove('lazyload');\n    if (typeof callback === 'function') callback();\n  };\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(4);\n\nvar _search = __webpack_require__(5);\n\nvar _toplist = __webpack_require__(6);\n\nvar _recommend = __webpack_require__(7);\n\nvar _music_player = __webpack_require__(9);\n\nvar search = new _search.Search(document.querySelector('#search-view'));\nvar player = new _music_player.MusicPlayer(document.querySelector('#player'));\nvar toplist = new _toplist.TopList(document.querySelector('#rank-view')).launch();\nvar recommend = new _recommend.Recommend(document.querySelector('#rec-view')).launch();\n\ndocument.querySelector('.show-player').addEventListener('click', function () {\n  player.show();\n});\n\nonHashChange();\naddEventListener('hashchange', onHashChange);\n\nfunction onHashChange() {\n  var hash = location.hash;\n  if (/^#player\\?.+/.test(hash)) {\n    var matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g);\n    var options = matches && matches.reduce(function (res, cur) {\n      var arr = cur.split('=');\n      res[arr[0]] = decodeURIComponent(arr[1]);\n      return res;\n    }, {});\n    player.play(options);\n  } else {\n    player.hide();\n  }\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\ndocument.addEventListener('click', function (event) {\n\n  var target = event.target;\n\n  if (target.dataset.role !== 'tab') return;\n\n  [].forEach.call(target.parentElement.children, function (tab) {\n    tab.classList.remove('active');\n  });\n  target.classList.add('active');\n\n  var content = document.querySelector(target.dataset.view);\n\n  if (content) {\n    [].forEach.call(content.parentElement.children, function (child) {\n      child.style.display = 'none';\n    });\n    content.style.display = 'block';\n  }\n\n  window.dispatchEvent(new Event('scroll'));\n});\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Search = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _helpers = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Search = exports.Search = function () {\n  function Search(el) {\n    _classCallCheck(this, Search);\n\n    this.$el = el;\n    this.$input = this.$el.querySelector('#search');\n    this.$input.addEventListener('keyup', this.onKeyUp.bind(this));\n    this.$songs = this.$el.querySelector('.song-list');\n    this.page = 1;\n    this.songs = {};\n    this.keyword = '';\n    this.perpage = 20;\n    this.nomore = false;\n    this.fetching = false;\n    this.onscroll = this.onScroll.bind(this);\n    window.addEventListener('scroll', this.onscroll);\n  }\n\n  _createClass(Search, [{\n    key: 'onKeyUp',\n    value: function onKeyUp(event) {\n      var keyword = event.target.value.trim();\n      if (!keyword) return this.reset();\n      if (event.keyCode !== 13) return;\n      this.search(keyword);\n    }\n  }, {\n    key: 'onScroll',\n    value: function onScroll(event) {\n      if (this.nomore) return window.removeEventListener('scroll', this.onscroll);\n      if (pageYOffset + document.documentElement.clientHeight > document.body.scrollHeight - 50) {\n        this.search(this.keyword, this.page + 1);\n      }\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.page = 1;\n      this.songs = {};\n      this.keyword = '';\n      this.nomore = false;\n      this.$songs.innerHTML = '';\n    }\n  }, {\n    key: 'search',\n    value: function search(keyword, page) {\n      var _this = this;\n\n      if (this.keyword === keyword && this.songs[page || this.page]) return;\n      if (this.nomore || this.fetching) return;\n      if (this.keyword !== keyword) this.reset();\n      this.keyword = keyword;\n      this.loading();\n      fetch((0, _helpers.searchUrl)(this.keyword, page || this.page)).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        _this.page = json.data.song.curpage;\n        _this.songs[_this.page] = json.data.song.list;\n        _this.nomore = json.message === 'no results';\n        return json.data.song.list;\n      }).then(function (songs) {\n        return _this.append(songs);\n      }).then(function () {\n        return _this.done();\n      }).catch(function () {\n        return _this.fetching = false;\n      });\n    }\n  }, {\n    key: 'append',\n    value: function append(songs) {\n      var html = songs.map(function (song) {\n        var artist = song.singer.map(function (s) {\n          return s.name;\n        }).join(' ');\n        return '\\n        <a class=\"song-item\"\\n           href=\"#player?artist=' + artist + '&songid=' + song.songid + '&songname=' + song.songname + '&albummid=' + song.albummid + '&duration=' + song.interval + '\">\\n          <i class=\"icon icon-music\"></i>\\n          <div class=\"song-name ellipsis\">' + song.songname + '</div>\\n          <div class=\"song-artist ellipsis\">' + artist + '</div>\\n        </a>';\n      }).join('');\n      this.$songs.insertAdjacentHTML('beforeend', html);\n    }\n  }, {\n    key: 'loading',\n    value: function loading() {\n      this.fetching = true;\n      this.$el.querySelector('.search-loading').classList.add('show');\n    }\n  }, {\n    key: 'done',\n    value: function done() {\n      this.fetching = false;\n      if (this.nomore) {\n        this.$el.querySelector('.loading-icon').style.display = 'none';\n        this.$el.querySelector('.loading-text').style.display = 'none';\n        this.$el.querySelector('.loading-done').style.display = 'block';\n        this.$el.querySelector('.search-loading').classList.add('show');\n      } else {\n        this.$el.querySelector('.search-loading').classList.remove('show');\n      }\n    }\n  }]);\n\n  return Search;\n}();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TopList = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lazyload = __webpack_require__(2);\n\nvar _constants = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar TopList = exports.TopList = function () {\n  function TopList(el) {\n    _classCallCheck(this, TopList);\n\n    this.$el = el;\n  }\n\n  _createClass(TopList, [{\n    key: 'launch',\n    value: function launch() {\n      var _this = this;\n\n      fetch(_constants.TOPLIST_URL).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.list = json.data.topList;\n      }).then(function () {\n        return _this.render();\n      });\n      return this;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      this.$el.querySelector('.toplist').innerHTML = this.list.map(function (item) {\n        return '<li class=\"top-item\">\\n        <div class=\"top-item-media\">\\n          <a href=\"#\">\\n            <img class=\"lazyload\" data-src=\"' + item.picUrl.replace('http://', 'https://') + '\">\\n          </a>\\n        </div>\\n        <div class=\"top-item-info\">\\n          <h3 class=\"top-item-title ellipsis\">' + item.topTitle + '</h3>\\n          <ul class=\"top-item-list\">' + _this2.songlist(item.songList) + '</ul>\\n        </div>\\n      </li>';\n      }).join('');\n\n      (0, _lazyload.lazyload)(this.$el.querySelectorAll('.lazyload'));\n    }\n  }, {\n    key: 'songlist',\n    value: function songlist(songs) {\n      return songs.map(function (song, i) {\n        return '<li class=\"top-item-song\">\\n        <i class=\"song-index\">' + (i + 1) + '</i>\\n        <span class=\"song-name\">' + song.songname + '</span>- ' + song.singername + '\\n      </li>';\n      }).join('');\n    }\n  }]);\n\n  return TopList;\n}();\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Recommend = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _slider = __webpack_require__(8);\n\nvar _lazyload = __webpack_require__(2);\n\nvar _constants = __webpack_require__(0);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Recommend = exports.Recommend = function () {\n  function Recommend(el) {\n    _classCallCheck(this, Recommend);\n\n    this.$el = el;\n  }\n\n  _createClass(Recommend, [{\n    key: 'launch',\n    value: function launch() {\n      var _this = this;\n\n      fetch(_constants.RECOMMEND_URL).then(function (res) {\n        return res.json();\n      }).then(function (json) {\n        return _this.json = json;\n      }).then(function () {\n        return _this.render();\n      });\n      return this;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      this.renderSlider(this.json.data.slider);\n      this.renderRadios(this.json.data.radioList);\n      this.renderPlayLists(this.json.data.songList);\n      (0, _lazyload.lazyload)();\n    }\n  }, {\n    key: 'renderSlider',\n    value: function renderSlider(slides) {\n      this.slider = new _slider.Slider({\n        el: this.$el.querySelector('#slider'),\n        slides: slides.map(function (slide) {\n          return {\n            link: slide.linkUrl.replace('http://', 'https://'),\n            image: slide.picUrl.replace('http://', 'https://')\n          };\n        })\n      });\n    }\n  }, {\n    key: 'renderRadios',\n    value: function renderRadios(radios) {\n      this.$el.querySelector('.radios .list').innerHTML = radios.map(function (radio) {\n        return '<div class=\"list-item\">\\n        <div class=\"list-media\">\\n          <img class=\"lazyload\" data-src=\"' + radio.picUrl + '\">\\n          <span class=\"icon icon-play\"></span>\\n        </div>\\n        <div class=\"list-detail\">\\n          <h3 class=\"list-title\">' + radio.Ftitle + '</h3>\\n        </div>\\n      </div>';\n      }).join('');\n    }\n  }, {\n    key: 'renderPlayLists',\n    value: function renderPlayLists(playlists) {\n      this.$el.querySelector('.playlists .list').innerHTML = playlists.map(function (list) {\n        return '<div class=\"list-item\">\\n        <div class=\"list-media\">\\n          <img class=\"lazyload\" data-src=\"' + list.picUrl + '\">\\n          <span class=\"icon icon-play\"></span>\\n        </div>\\n        <div class=\"list-detail\">\\n          <h3 class=\"list-title\">' + list.songListDesc + '</h3>\\n          <div class=\"list-text\"></div>\\n        </div>\\n      </div>';\n      }).join('');\n    }\n  }]);\n\n  return Recommend;\n}();\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Slider = exports.Slider = function () {\n  function Slider() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Slider);\n\n    this.$el = options.el;\n    this.slides = options.slides;\n    this.interval = options.interval || 3000;\n    this.duration = options.duration || 300;\n    this.index = 0;\n    this.render();\n    this.start();\n  }\n\n  _createClass(Slider, [{\n    key: 'render',\n    value: function render() {\n      this.$el.innerHTML = '<div class=\"qq-slider-wrap\"></div>';\n      this.$wrap = this.$el.firstElementChild;\n      this.$wrap.style.transitionDuration = this.duration + 'ms';\n      this.$wrap.style.width = this.slides.length * 100 + '%';\n      this.$wrap.innerHTML = this.slides.map(function (slide) {\n        return '<div class=\"qq-slider-item\">\\n          <a href=\"' + slide.link + '\">\\n            <img src=\"' + slide.image + '\">\\n          </a>\\n      </div>';\n      }).join('');\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      setInterval(this.next.bind(this), this.interval);\n    }\n  }, {\n    key: 'next',\n    value: function next() {\n      this.index += 1;\n      if (this.index === this.slides.length) {\n        this.$wrap.style.transform = 'translate(0)';\n        this.index = 0;\n        return;\n      }\n      this.$wrap.style.transform = 'translate(-' + this.index * 100 / this.slides.length + '%)';\n    }\n  }]);\n\n  return Slider;\n}();\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MusicPlayer = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _progress_bar = __webpack_require__(10);\n\nvar _lyrics_player = __webpack_require__(11);\n\nvar _helpers = __webpack_require__(1);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MusicPlayer = exports.MusicPlayer = function () {\n  function MusicPlayer(el) {\n    _classCallCheck(this, MusicPlayer);\n\n    this.$el = el;\n    this.$el.addEventListener('click', this);\n    this.$audio = this.createAudio();\n    this.lyrics = new _lyrics_player.LyricsPlayer(this.$el.querySelector('.player-lyrics'), this.$audio);\n    this.progress = new _progress_bar.ProgressBar(this.$el.querySelector('.progress'));\n    this.fetching = false;\n  }\n\n  _createClass(MusicPlayer, [{\n    key: 'createAudio',\n    value: function createAudio() {\n      var _this = this;\n\n      var audio = document.createElement('audio');\n      audio.id = 'player-' + Math.floor(Math.random() * 100) + '-' + +new Date();\n      audio.addEventListener('ended', function () {\n        _this.$audio.play();\n        _this.lyrics.restart();\n        _this.progress.restart();\n      });\n      document.body.appendChild(audio);\n      return audio;\n    }\n  }, {\n    key: 'handleEvent',\n    value: function handleEvent(event) {\n      var target = event.target;\n      switch (true) {\n        case target.matches('.icon-play'):\n          this.onPlay(event);\n          break;\n        case target.matches('.icon-pause'):\n          this.onPause(event);\n          break;\n        case target.matches('.icon-list'):\n          this.hide();\n          break;\n      }\n    }\n  }, {\n    key: 'onPlay',\n    value: function onPlay(event) {\n      if (this.fetching) return;\n      this.$audio.play();\n      this.lyrics.start();\n      this.progress.start();\n      event.target.classList.add('icon-pause');\n      event.target.classList.remove('icon-play');\n    }\n  }, {\n    key: 'onPause',\n    value: function onPause(event) {\n      this.$audio.pause();\n      this.lyrics.pause();\n      this.progress.pause();\n      event.target.classList.add('icon-play');\n      event.target.classList.remove('icon-pause');\n    }\n  }, {\n    key: 'play',\n    value: function play() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!options) return;\n\n      this.$el.querySelector('.song-name').innerText = options.songname;\n      this.$el.querySelector('.song-artist').innerText = options.artist;\n      this.progress.reset(options.duration);\n\n      var coverUrl = (0, _helpers.albumCoverUrl)(options.albummid);\n      this.$el.querySelector('.album-cover').src = coverUrl;\n      this.$el.querySelector('.player-background').style.backgroundImage = 'url(' + coverUrl + ')';\n\n      if (options.songid) {\n        if (this.songid !== options.songid) {\n          this.$el.querySelector('.icon-action').className = 'icon-action icon-play';\n        }\n\n        this.songid = options.songid;\n        this.$audio.src = (0, _helpers.songUrl)(this.songid);\n        this.fetching = true;\n        fetch((0, _helpers.lyricsUrl)(this.songid)).then(function (res) {\n          return res.json();\n        }).then(function (json) {\n          return json.lyric;\n        }).then(function (text) {\n          return _this2.lyrics.reset(text);\n        }).catch(function () {}).then(function () {\n          return _this2.fetching = false;\n        });\n      }\n\n      this.show();\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.$el.classList.add('show');\n      document.body.classList.add('noscroll');\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.$el.classList.remove('show');\n      document.body.classList.remove('noscroll');\n    }\n  }]);\n\n  return MusicPlayer;\n}();\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ProgressBar = exports.ProgressBar = function () {\n  function ProgressBar(el, duration, start) {\n    _classCallCheck(this, ProgressBar);\n\n    this.$el = el;\n    this.elapsed = 0;\n    this.duration = duration || 0;\n    this.progress = 0;\n    this.render();\n    this.$progress = this.$el.querySelector('.progress-bar-progress');\n    this.$elapsed = this.$el.querySelector('.progress-elapsed');\n    this.$duration = this.$el.querySelector('.progress-duration');\n    this.$elapsed.innerText = this.formatTime(this.elapsed);\n    this.$duration.innerText = this.formatTime(this.duration);\n    if (start) this.start();\n  }\n\n  _createClass(ProgressBar, [{\n    key: 'start',\n    value: function start() {\n      this.pause();\n      this.intervalId = setInterval(this.update.bind(this), 50);\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      clearInterval(this.intervalId);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.elapsed += 0.05;\n      if (this.elapsed >= this.duration) this.reset();\n      this.progress = this.elapsed / this.duration;\n      this.$progress.style.transform = 'translate(' + (this.progress * 100 - 100) + '%)';\n      this.$elapsed.innerText = this.formatTime(this.elapsed);\n    }\n  }, {\n    key: 'reset',\n    value: function reset(duration) {\n      this.pause();\n      this.elapsed = 0;\n      this.progress = 0;\n      this.$progress.style.transform = 'translate(-100%)';\n      this.$elapsed.innerText = this.formatTime(this.elapsed);\n      if (duration) {\n        this.duration = +duration;\n        this.$duration.innerText = this.formatTime(this.duration);\n      }\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      this.reset();\n      this.start();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      this.$el.innerHTML = '\\n      <div class=\"progress-time progress-elapsed\"></div>\\n        <div class=\"progress-bar\">\\n          <div class=\"progress-bar-progress\"></div>\\n        </div>\\n      <div class=\"progress-time progress-duration\"></div>\\n    ';\n    }\n  }, {\n    key: 'formatTime',\n    value: function formatTime(seconds) {\n      var mins = Math.floor(seconds / 60);\n      var secs = Math.floor(seconds % 60);\n      if (mins < 10) mins = '0' + mins;\n      if (secs < 10) secs = '0' + secs;\n      return mins + ':' + secs;\n    }\n  }]);\n\n  return ProgressBar;\n}();\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LyricsPlayer = exports.LyricsPlayer = function () {\n  function LyricsPlayer(el, audio) {\n    _classCallCheck(this, LyricsPlayer);\n\n    this.$el = el;\n    this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>';\n    this.$lines = this.$el.querySelector('.player-lyrics-lines');\n    this.$audio = audio;\n    this.text = '';\n    this.index = 0;\n    this.lyrics = [];\n    this.elapsed = 0;\n    this.reset(this.text);\n  }\n\n  _createClass(LyricsPlayer, [{\n    key: 'start',\n    value: function start() {\n      this.pause();\n      this.intervalId = setInterval(this.update.bind(this), 1000);\n    }\n  }, {\n    key: 'pause',\n    value: function pause() {\n      clearInterval(this.intervalId);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this.elapsed = Math.round(this.$audio ? this.$audio.currentTime : this.elapsed + 1);\n      if (this.index === this.lyrics.length - 1) return;\n      for (var i = this.index + 1; i < this.lyrics.length; i++) {\n        var seconds = this.getSeconds(this.lyrics[i]);\n        if (this.elapsed === seconds && (!this.lyrics[i + 1] || this.elapsed < this.getSeconds(this.lyrics[i + 1]))) {\n          this.$lines.children[this.index].classList.remove('active');\n          this.$lines.children[i].classList.add('active');\n          this.index = i;\n          break;\n        }\n      }\n      if (this.index > 2) {\n        var y = -(this.index - 2) * this.LINE_HEIGHT;\n        this.$lines.style.transform = 'translateY(' + y + 'px)';\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var html = this.lyrics.map(function (line) {\n        return '\\n      <div class=\"player-lyrics-line\">' + line.slice(10) + '</div>\\n    ';\n      }).join('');\n      this.$lines.innerHTML = html;\n    }\n  }, {\n    key: 'reset',\n    value: function reset(text) {\n      this.pause();\n      this.index = 0;\n      this.elapsed = 0;\n\n      this.$lines.style.transform = 'translateY(0)';\n      var $active = this.$lines.querySelector('.active');\n      if ($active) {\n        $active.classList.remove('active');\n      }\n\n      if (text) {\n        this.text = this.formatText(text) || '';\n        this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || [];\n        if (this.lyrics.length) this.render();\n      }\n\n      if (this.lyrics.length) {\n        this.$lines.children[this.index].classList.add('active');\n      }\n    }\n  }, {\n    key: 'restart',\n    value: function restart() {\n      this.reset();\n      this.start();\n    }\n  }, {\n    key: 'getSeconds',\n    value: function getSeconds(line) {\n      return +line.replace(/^\\[(\\d{2}):(\\d{2}).*/, function (match, p1, p2) {\n        return 60 * +p1 + +p2;\n      });\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(text) {\n      var div = document.createElement('div');\n      div.innerHTML = text;\n      return div.innerText;\n    }\n  }]);\n\n  return LyricsPlayer;\n}();\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9a533c3d840593a8e180","export const RECOMMEND_URL = 'https://qq-music-api.now.sh'\nexport const TOPLIST_URL = 'https://qq-music-api.now.sh/top'\nexport const SEARCH_URL = 'https://qq-music-api.now.sh/search'\nexport const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'\n\n\n// WEBPACK FOOTER //\n// ./javascripts/constants.js","import { LYRICS_URL, SEARCH_URL } from './constants.js'\n\nexport function songUrl(id) {\n  return `http://ws.stream.qqmusic.qq.com/${id}.m4a?fromtag=46`\n}\n\nexport function lyricsUrl(songid) {\n  return `${LYRICS_URL}?id=${songid}`\n}\n\nexport function albumCoverUrl(id) {\n  return `https://y.gtimg.cn/music/photo_new/T002R150x150M000${id}.jpg`\n}\n\nexport function searchUrl(keyword, page = 1) {\n  return `${SEARCH_URL}?keyword=${keyword}&page=${page}`\n}\n\n\n\n// WEBPACK FOOTER //\n// ./javascripts/helpers.js","export function lazyload(images) {\n  let imgs = [].slice.call(images || document.querySelectorAll('.lazyload'))  // Array.from(images)\n\n  if ('IntersectionObserver' in window) {\n    let observer = new IntersectionObserver(function(entries) {\n      entries.forEach(entry => {\n        if (entry.intersectionRatio > 0) {\n          loadImage(entry.target, () => {\n            observer.unobserve(entry.target)\n          })\n        }\n      })\n    }, { threshold: 0.01 })\n  \n    imgs.forEach(img => observer.observe(img))\n  } else {\n    let onscroll = throttle(function() {\n      if (imgs.length === 0) {\n        return window.removeEventListener('scroll', onscroll)\n      }\n      imgs = imgs.filter(img => img.classList.contains('lazyload'))\n      imgs.forEach(img => inViewport(img) && loadImage(img))\n    }, 300)\n  \n    window.addEventListener('scroll', onscroll)\n    window.dispatchEvent(new Event('scroll'))\n  }\n}\n\nfunction throttle(func, wait) {\n  let prev, timer\n  return function fn() {\n    let curr = Date.now()\n    let diff = curr - prev\n    if (!prev || diff >= wait) {\n      func()\n      prev = curr\n    } else if (diff < wait) {\n      clearTimeout(timer)\n      timer = setTimeout(fn, wait - diff)\n    }\n  }\n}\n\nfunction inViewport(img) {\n  let { top, left, right, bottom } = img.getBoundingClientRect()\n  let vpWidth = document.documentElement.clientWidth\n  let vpHeight = document.documentElement.clientHeight\n  return (\n    (top > 0 && top < vpHeight || bottom > 0 && bottom < vpHeight) &&\n    (left > 0 && left < vpWidth || right > 0 && right < vpWidth)\n  )\n}\n\nfunction loadImage(img, callback) {\n  let image = new Image()\n  image.src = img.dataset.src\n  image.onload = function() {\n    img.src = image.src\n    img.classList.remove('lazyload')\n    if (typeof callback === 'function') callback()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/lazyload.js","import './tab.js'\nimport { Search } from './search.js'\nimport { TopList } from './toplist.js'\nimport { Recommend } from './recommend.js'\nimport { MusicPlayer } from './music_player.js'\n\nlet search = new Search(document.querySelector('#search-view'))\nlet player = new MusicPlayer(document.querySelector('#player'))\nlet toplist = new TopList(document.querySelector('#rank-view')).launch()\nlet recommend = new Recommend(document.querySelector('#rec-view')).launch()\n\ndocument.querySelector('.show-player').addEventListener('click', () => {\n  player.show()\n})\n\nonHashChange()\naddEventListener('hashchange', onHashChange)\n\nfunction onHashChange() {\n  let hash = location.hash\n  if (/^#player\\?.+/.test(hash)) {\n    let matches = hash.slice(hash.indexOf('?') + 1).match(/(\\w+)=([^&]+)/g)\n    let options = matches && matches.reduce((res, cur) => {\n      let arr = cur.split('=')\n      res[arr[0]] = decodeURIComponent(arr[1])\n      return res\n    }, {})\n    player.play(options)\n  } else {\n    player.hide()\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/app.js","document.addEventListener('click', function(event) {\n  \n  let target = event.target\n\n  if (target.dataset.role !== 'tab') return\n\n  [].forEach.call(target.parentElement.children, tab => {\n    tab.classList.remove('active')\n  })\n  target.classList.add('active')\n    \n  let content = document.querySelector(target.dataset.view)\n\n  if (content) {\n    [].forEach.call(content.parentElement.children, child => {\n      child.style.display = 'none'\n    })\n    content.style.display = 'block'\n  }\n\n  window.dispatchEvent(new Event('scroll'))\n\n})\n\n\n// WEBPACK FOOTER //\n// ./javascripts/tab.js","import { searchUrl } from './helpers.js'\n\nexport class Search {\n  constructor(el) {\n    this.$el = el\n    this.$input = this.$el.querySelector('#search')\n    this.$input.addEventListener('keyup', this.onKeyUp.bind(this))\n    this.$songs = this.$el.querySelector('.song-list')\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.perpage = 20\n    this.nomore = false\n    this.fetching = false\n    this.onscroll = this.onScroll.bind(this)\n    window.addEventListener('scroll', this.onscroll)\n  }\n\n  onKeyUp(event) {\n    let keyword = event.target.value.trim()\n    if (!keyword) return this.reset()\n    if (event.keyCode !== 13) return\n    this.search(keyword)\n  }\n\n  onScroll(event) {\n    if (this.nomore) return window.removeEventListener('scroll', this.onscroll)\n    if (pageYOffset + document.documentElement.clientHeight > document.body.scrollHeight - 50) {\n      this.search(this.keyword, this.page + 1)\n    }\n  }\n\n  reset() {\n    this.page = 1\n    this.songs = {}\n    this.keyword = ''\n    this.nomore = false\n    this.$songs.innerHTML = ''\n  }\n\n  search(keyword, page) {\n    if (this.keyword === keyword && this.songs[page || this.page]) return\n    if (this.nomore || this.fetching) return\n    if (this.keyword !== keyword) this.reset()\n    this.keyword = keyword\n    this.loading()\n    fetch(searchUrl(this.keyword, page || this.page))\n      .then(res => res.json())\n      .then(json => {\n        this.page = json.data.song.curpage\n        this.songs[this.page] = json.data.song.list\n        this.nomore = json.message === 'no results'\n        return json.data.song.list\n      })\n      .then(songs => this.append(songs))\n      .then(() => this.done())\n      .catch(() => this.fetching = false)\n  }\n\n  append(songs) {\n    let html = songs.map(song => {\n      let artist = song.singer.map(s => s.name).join(' ')\n      return `\n        <a class=\"song-item\"\n           href=\"#player?artist=${artist}&songid=${song.songid}&songname=${song.songname}&albummid=${song.albummid}&duration=${song.interval}\">\n          <i class=\"icon icon-music\"></i>\n          <div class=\"song-name ellipsis\">${song.songname}</div>\n          <div class=\"song-artist ellipsis\">${artist}</div>\n        </a>`}).join('')\n    this.$songs.insertAdjacentHTML('beforeend', html)\n  }\n\n  loading() {\n    this.fetching = true\n    this.$el.querySelector('.search-loading').classList.add('show')\n  }\n\n  done() {\n    this.fetching = false\n    if (this.nomore) {\n      this.$el.querySelector('.loading-icon').style.display = 'none'\n      this.$el.querySelector('.loading-text').style.display = 'none'\n      this.$el.querySelector('.loading-done').style.display = 'block'\n      this.$el.querySelector('.search-loading').classList.add('show')\n    } else {\n      this.$el.querySelector('.search-loading').classList.remove('show')\n    }\n  }\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/search.js","import { lazyload } from './lazyload.js' \nimport { TOPLIST_URL } from './constants.js'\n\nexport class TopList {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(TOPLIST_URL)\n      .then(res => res.json())\n      .then(json => this.list = json.data.topList)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.$el.querySelector('.toplist').innerHTML = this.list.map(item => \n      `<li class=\"top-item\">\n        <div class=\"top-item-media\">\n          <a href=\"#\">\n            <img class=\"lazyload\" data-src=\"${item.picUrl.replace('http://', 'https://')}\">\n          </a>\n        </div>\n        <div class=\"top-item-info\">\n          <h3 class=\"top-item-title ellipsis\">${item.topTitle}</h3>\n          <ul class=\"top-item-list\">${this.songlist(item.songList)}</ul>\n        </div>\n      </li>`).join('')\n\n    lazyload(this.$el.querySelectorAll('.lazyload'))\n  }\n\n  songlist(songs) {\n    return songs.map((song, i) => \n      `<li class=\"top-item-song\">\n        <i class=\"song-index\">${i + 1}</i>\n        <span class=\"song-name\">${song.songname}</span>- ${song.singername}\n      </li>`).join('')\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/toplist.js","import { Slider } from './slider.js'\nimport { lazyload } from './lazyload.js'\nimport { RECOMMEND_URL } from './constants.js'\n\nexport class Recommend {\n  constructor(el) {\n    this.$el = el\n  }\n\n  launch() {\n    fetch(RECOMMEND_URL)\n      .then(res => res.json())\n      .then(json => this.json = json)\n      .then(() => this.render())\n    return this\n  }\n\n  render() {\n    this.renderSlider(this.json.data.slider)\n    this.renderRadios(this.json.data.radioList)\n    this.renderPlayLists(this.json.data.songList)\n    lazyload()\n  }\n\n  renderSlider(slides) {\n    this.slider = new Slider({\n      el: this.$el.querySelector('#slider'),\n      slides: slides.map(slide => ({ \n        link: slide.linkUrl.replace('http://', 'https://'), \n        image: slide.picUrl.replace('http://', 'https://')\n      }))\n    })\n  }\n\n  renderRadios(radios) {\n    this.$el.querySelector('.radios .list').innerHTML = radios.map(radio => \n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${radio.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${radio.Ftitle}</h3>\n        </div>\n      </div>`).join('')\n  }\n\n  renderPlayLists(playlists) {\n    this.$el.querySelector('.playlists .list').innerHTML = playlists.map(list =>\n      `<div class=\"list-item\">\n        <div class=\"list-media\">\n          <img class=\"lazyload\" data-src=\"${list.picUrl}\">\n          <span class=\"icon icon-play\"></span>\n        </div>\n        <div class=\"list-detail\">\n          <h3 class=\"list-title\">${list.songListDesc}</h3>\n          <div class=\"list-text\"></div>\n        </div>\n      </div>`).join('')\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/recommend.js","export class Slider {\n  constructor(options = {}) {\n    this.$el = options.el\n    this.slides = options.slides\n    this.interval = options.interval || 3000\n    this.duration = options.duration || 300\n    this.index = 0\n    this.render()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `<div class=\"qq-slider-wrap\"></div>`\n    this.$wrap = this.$el.firstElementChild\n    this.$wrap.style.transitionDuration = `${this.duration}ms`\n    this.$wrap.style.width = `${this.slides.length * 100}%`\n    this.$wrap.innerHTML = this.slides.map(slide =>\n      `<div class=\"qq-slider-item\">\n          <a href=\"${slide.link}\">\n            <img src=\"${slide.image}\">\n          </a>\n      </div>`\n    ).join('')\n  }\n\n  start() {\n    setInterval(this.next.bind(this), this.interval)\n  }\n\n  next() {\n    this.index += 1\n    if (this.index === this.slides.length) {\n      this.$wrap.style.transform = `translate(0)`\n      this.index = 0\n      return\n    }\n    this.$wrap.style.transform = `translate(-${this.index * 100 / this.slides.length}%)`\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/slider.js","import { ProgressBar } from './progress_bar.js'\nimport { LyricsPlayer } from './lyrics_player.js'\nimport { songUrl, lyricsUrl, albumCoverUrl } from './helpers.js'\n\nexport class MusicPlayer {\n  constructor(el) {\n    this.$el = el\n    this.$el.addEventListener('click', this)\n    this.$audio = this.createAudio()\n    this.lyrics = new LyricsPlayer(this.$el.querySelector('.player-lyrics'), this.$audio)\n    this.progress = new ProgressBar(this.$el.querySelector('.progress'))\n    this.fetching = false\n  }\n\n  createAudio() {\n    let audio = document.createElement('audio')\n    audio.id = `player-${Math.floor(Math.random() * 100)}-${+new Date()}`\n    audio.addEventListener('ended', () => {\n      this.$audio.play()\n      this.lyrics.restart()\n      this.progress.restart()\n    })\n    document.body.appendChild(audio)\n    return audio\n  }\n\n  handleEvent(event) {\n    let target = event.target\n    switch (true) {\n      case target.matches('.icon-play'):\n        this.onPlay(event)\n        break\n      case target.matches('.icon-pause'):\n        this.onPause(event)\n        break\n      case target.matches('.icon-list'):\n        this.hide()\n        break\n    }\n  }\n\n  onPlay(event) {\n    if (this.fetching) return\n    this.$audio.play()\n    this.lyrics.start()\n    this.progress.start()\n    event.target.classList.add('icon-pause')\n    event.target.classList.remove('icon-play')\n  }\n\n  onPause(event) {\n    this.$audio.pause()\n    this.lyrics.pause()\n    this.progress.pause()\n    event.target.classList.add('icon-play')\n    event.target.classList.remove('icon-pause')\n  }\n\n  play(options = {}) {\n    if (!options) return\n    \n    this.$el.querySelector('.song-name').innerText = options.songname\n    this.$el.querySelector('.song-artist').innerText = options.artist\n    this.progress.reset(options.duration)\n    \n    let coverUrl = albumCoverUrl(options.albummid)\n    this.$el.querySelector('.album-cover').src = coverUrl\n    this.$el.querySelector('.player-background').style.backgroundImage = `url(${coverUrl})`\n\n    if (options.songid) {\n      if (this.songid !== options.songid) {\n        this.$el.querySelector('.icon-action').className = 'icon-action icon-play'\n      }\n      \n      this.songid = options.songid\n      this.$audio.src = songUrl(this.songid)\n      this.fetching = true\n      fetch(lyricsUrl(this.songid))\n        .then(res => res.json())\n        .then(json => json.lyric)\n        .then(text => this.lyrics.reset(text))\n        .catch(() => {})\n        .then(() => this.fetching = false)\n    }\n    \n    this.show()\n  }\n\n  show() {\n    this.$el.classList.add('show')\n    document.body.classList.add('noscroll')\n  }\n\n  hide() {\n    this.$el.classList.remove('show')\n    document.body.classList.remove('noscroll')\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/music_player.js","export class ProgressBar {\n  constructor(el, duration, start) {\n    this.$el = el\n    this.elapsed = 0\n    this.duration = duration || 0\n    this.progress = 0\n    this.render()\n    this.$progress = this.$el.querySelector('.progress-bar-progress')\n    this.$elapsed = this.$el.querySelector('.progress-elapsed')\n    this.$duration = this.$el.querySelector('.progress-duration')\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    this.$duration.innerText = this.formatTime(this.duration)\n    if (start) this.start()\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 50)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed += 0.05\n    if (this.elapsed >= this.duration) this.reset()\n    this.progress = this.elapsed / this.duration\n    this.$progress.style.transform = `translate(${this.progress * 100 - 100}%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n  }\n\n  reset(duration) {\n    this.pause()\n    this.elapsed = 0\n    this.progress = 0\n    this.$progress.style.transform = `translate(-100%)`\n    this.$elapsed.innerText = this.formatTime(this.elapsed)\n    if (duration) {\n      this.duration = +duration\n      this.$duration.innerText = this.formatTime(this.duration)\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  render() {\n    this.$el.innerHTML = `\n      <div class=\"progress-time progress-elapsed\"></div>\n        <div class=\"progress-bar\">\n          <div class=\"progress-bar-progress\"></div>\n        </div>\n      <div class=\"progress-time progress-duration\"></div>\n    `\n  }\n\n  formatTime(seconds) {\n    let mins = Math.floor(seconds / 60)\n    let secs = Math.floor(seconds % 60)\n    if (mins < 10) mins = '0' + mins\n    if (secs < 10) secs = '0' + secs\n    return `${mins}:${secs}`\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./javascripts/progress_bar.js","export class LyricsPlayer {\n  constructor(el, audio) {\n    this.$el = el\n    this.$el.innerHTML = '<div class=\"player-lyrics-lines\"></div>'\n    this.$lines = this.$el.querySelector('.player-lyrics-lines')\n    this.$audio = audio\n    this.text = ''\n    this.index = 0\n    this.lyrics = []\n    this.elapsed = 0\n    this.reset(this.text)\n  }\n\n  start() {\n    this.pause()\n    this.intervalId = setInterval(this.update.bind(this), 1000)\n  }\n\n  pause() {\n    clearInterval(this.intervalId)\n  }\n\n  update() {\n    this.elapsed = Math.round(this.$audio ? this.$audio.currentTime : this.elapsed + 1)\n    if (this.index === this.lyrics.length - 1) return\n    for (let i = this.index + 1; i < this.lyrics.length; i++) {\n      let seconds = this.getSeconds(this.lyrics[i])\n      if (\n        this.elapsed === seconds &&\n        (!this.lyrics[i + 1] || this.elapsed < this.getSeconds(this.lyrics[i + 1]))\n      ) {\n        this.$lines.children[this.index].classList.remove('active')\n        this.$lines.children[i].classList.add('active')\n        this.index = i\n        break\n      }\n    }\n    if (this.index > 2) {\n      let y = -(this.index - 2) * this.LINE_HEIGHT\n      this.$lines.style.transform = `translateY(${y}px)`\n    }\n  }\n\n  render() {\n    let html = this.lyrics.map(line => `\n      <div class=\"player-lyrics-line\">${line.slice(10)}</div>\n    `).join('')\n    this.$lines.innerHTML = html\n  }\n\n  reset(text) {\n    this.pause()\n    this.index = 0\n    this.elapsed = 0\n    \n    this.$lines.style.transform = `translateY(0)`\n    let $active = this.$lines.querySelector('.active')\n    if ($active) {\n      $active.classList.remove('active')\n    }\n\n    if (text) {\n      this.text = this.formatText(text) || ''\n      this.lyrics = this.text.match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm) || []\n      if (this.lyrics.length) this.render()\n    }\n\n    if (this.lyrics.length) {\n      this.$lines.children[this.index].classList.add('active')\n    }\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  getSeconds(line) {\n    return +line.replace(/^\\[(\\d{2}):(\\d{2}).*/, (match, p1, p2) => 60 * (+p1) + (+p2))\n  }\n\n  formatText(text) {\n    let div = document.createElement('div')\n    div.innerHTML = text\n    return div.innerText\n  }\n}\n\nLyricsPlayer.prototype.LINE_HEIGHT = 42\n\n\n// WEBPACK FOOTER //\n// ./javascripts/lyrics_player.js"],"sourceRoot":""}